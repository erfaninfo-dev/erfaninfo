# راهنمای کامل سیستم مدیریت (Admin Panel)

## 🎯 خلاصه

سیستم مدیریت ایجاد شده شامل:
- **صفحه ورود امن** با یوزر و پسورد
- **داشبورد مدیریتی** با آمار کلی
- **مدیریت گزارشات سوالات** با قابلیت ویرایش
- **محافظت کامل** از تمام صفحات admin

## 🔐 دسترسی و امنیت

### آدرس‌های مهم:
- **ورود:** `/admin/login`
- **داشبورد:** `/admin`
- **مدیریت گزارشات:** `/admin/wrong-questions`

### اطلاعات ورود پیش‌فرض:
- **نام کاربری:** `admin`
- **رمز عبور:** `admin123`

⚠️ **هشدار امنیتی:** حتماً این اطلاعات را در محیط تولید تغییر دهید!

## 🛠️ تغییر رمز عبور

در فایل `app.py` قسمت `ADMIN_CREDENTIALS` را ویرایش کنید:

```python
ADMIN_CREDENTIALS = {
    'admin': {
        'username': 'admin',
        'password_hash': hashlib.sha256('رمز_جدید_شما'.encode()).hexdigest(),
        'name': 'مدیر سیستم'
    }
}
```

## 📊 امکانات سیستم

### 1. داشبورد اصلی (`/admin`)
- **آمار کلی:** تعداد کل، در انتظار، اصلاح شده، امروز
- **دسترسی سریع:** لینک‌های مستقیم به بخش‌های مختلف
- **خروج امن:** دکمه خروج با پاک کردن session

### 2. مدیریت گزارشات سوالات (`/admin/wrong-questions`)
- **مشاهده کامل:** تمام گزارشات با جزئیات
- **فیلتر پیشرفته:** بر اساس وضعیت و نوع آزمون
- **ویرایش سوالات:** تغییر متن، گزینه‌ها و پاسخ صحیح
- **تغییر وضعیت:** بررسی شد، اصلاح شد، رد شد

### 3. گزارشات دسته‌بندی شده
- `/admin/reports/pending` - در انتظار بررسی
- `/admin/reports/fixed` - اصلاح شده  
- `/admin/reports/rejected` - رد شده

## 🔧 ساختار فایل‌ها

### فایل‌های جدید ایجاد شده:
```
templates/admin/
├── login.html          # صفحه ورود
├── dashboard.html      # داشبورد اصلی
└── wrong_questions.html # مدیریت گزارشات

static/
├── css/admin.css       # استایل‌های admin
└── js/admin.js         # JavaScript admin

ADMIN_README.md         # راهنمای اولیه
README_ADMIN_COMPLETE.md # راهنمای کامل
```

### تغییرات در فایل‌های موجود:
- `app.py` - اضافه شدن سیستم احراز هویت و route های admin
- `templates/base.html` - اضافه شدن block های extra_css و extra_js

## 🛡️ امنیت

### محافظت‌های اعمال شده:
1. **Session Management:** تمام صفحات admin با session محافظت شده‌اند
2. **Decorator:** `@admin_required` برای محافظت از route ها
3. **Redirect:** هدایت خودکار به صفحه login در صورت عدم ورود
4. **API Protection:** تمام API های admin نیز محافظت شده‌اند

### توصیه‌های امنیتی:
1. **تغییر SECRET_KEY:** در فایل `app.py` مقدار `SECRET_KEY` را تغییر دهید
2. **HTTPS:** در محیط تولید حتماً از HTTPS استفاده کنید
3. **فایروال:** دسترسی به مسیرهای `/admin` را محدود کنید
4. **رمز قوی:** از رمز عبور قوی و پیچیده استفاده کنید

## 🎨 رابط کاربری

### ویژگی‌های UI/UX:
- **طراحی مدرن:** استفاده از gradient و shadow
- **Responsive:** سازگار با تمام دستگاه‌ها
- **انیمیشن:** hover effects و transitions
- **رنگ‌بندی:** استفاده از رنگ‌های معنادار برای وضعیت‌ها

### رنگ‌های وضعیت:
- 🟡 **در انتظار:** زرد
- 🔵 **بررسی شده:** آبی
- 🟢 **اصلاح شده:** سبز
- 🔴 **رد شده:** قرمز

## 🔍 عیب‌یابی

### مشکلات رایج:

#### 1. خطای "Session not found"
- بررسی کنید که `SECRET_KEY` تنظیم شده باشد
- مطمئن شوید که Flask session درست کار می‌کند

#### 2. خطای "Access denied"
- بررسی کنید که route با `@admin_required` محافظت شده باشد
- مطمئن شوید که session معتبر است

#### 3. خطای "Database connection"
- تنظیمات دیتابیس را بررسی کنید
- مطمئن شوید که جدول `wrong_questions` وجود دارد

### لاگ‌ها:
تمام خطاها در console سرور ثبت می‌شوند. برای بررسی:
```bash
python app.py
```

## 📱 تست سیستم

### مراحل تست:
1. سرور را اجرا کنید: `python app.py`
2. به آدرس `http://localhost:5000/admin/login` بروید
3. با اطلاعات پیش‌فرض وارد شوید
4. تمام بخش‌ها را تست کنید

### تست‌های امنیتی:
1. **بدون ورود:** مستقیماً به `/admin` بروید (باید به login هدایت شوید)
2. **رمز اشتباه:** رمز اشتباه وارد کنید
3. **خروج:** دکمه خروج را بزنید و دوباره وارد شوید

## 🚀 نصب و راه‌اندازی

### پیش‌نیازها:
- Python 3.7+
- Flask
- MySQL
- تمام dependencies موجود در `requirements.txt`

### مراحل نصب:
1. کد را clone کنید
2. تنظیمات دیتابیس را در `app.py` وارد کنید
3. رمز عبور admin را تغییر دهید
4. سرور را اجرا کنید

## 📞 پشتیبانی

در صورت بروز مشکل:
1. لاگ‌های سرور را بررسی کنید
2. تنظیمات امنیتی را چک کنید
3. اتصال دیتابیس را تست کنید
4. فایل‌های CSS و JS را بررسی کنید

---

**نکته:** این سیستم برای محیط توسعه طراحی شده است. برای استفاده در محیط تولید، حتماً تنظیمات امنیتی را تقویت کنید. 